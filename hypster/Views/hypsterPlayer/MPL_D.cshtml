<!DOCTYPE html>

@model hypster.ViewModels.videoPlayerViewModel
@{
    Layout = null;
}



<html>
  <head>
        
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="X-UA-Compatible" content="IE=9">
        <title>@ViewBag.PageTitle</title>
        
        <meta name="description" content="Create a music playlist or your own stations of your favorite artists online for free. Listen to 10 millions YouTube music playlists and to popular music genres." />
        
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"  type="text/javascript"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"  type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>

        <script src="/scripts/swfobject.js"  type="text/javascript"></script>

        @Scripts.Render("~/scripts/hypScriptD.js?id=44729381")
        
        <link href="/css/SiteD.css?id=44729381" rel="stylesheet" type="text/css" />
        <link href="/css/PlayerD.css?id=44729381" rel="stylesheet" type="text/css" />





        <script type="text/javascript">
            function change_player_playlist(object) {
                window.location = "/hypsterPlayer/MPL?media_type=playlist&playlist_id=@ViewBag.PlaylistID&us_id=@ViewBag.UserID";
            }

            if (isMobile.any()) {
                $(window).unbind('beforeunload');
            }

            $(document).ready(function () {

                var margin_top = 2;
                if ($(window).height() >= 700) {
                    margin_top = ($(window).height() - 680) / 2;
                }
                $(".MainRootCont").css("margin-top", margin_top + "px");





                //++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
                CURR_VIDEO = 0;
                Higlight_Item(CURR_VIDEO);


                PLAY_STATE = "1";
                $("#PlPs_btn").css("background-image", "url('/imgs/player/pause_icn.jpg')");
                //++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

            });

            $(window).resize(function () {

                var margin_top = 2;
                if ($(window).height() >= 700) {
                    margin_top = ($(window).height() - 680) / 2;
                }
                $(".MainRootCont").css("margin-top", margin_top + "px");

            });
        </script>




        <script type="text/javascript">

            function callFlash_next_song(p_song_id) {
                thisMovie("HypsterOriginalPlayer").jsnextsong(p_song_id);
            }
            function callFlash_prev_song(p_song_id) {
                thisMovie("HypsterOriginalPlayer").jsprevsong(p_song_id);
            }


            function callFlash_play_song() {
                thisMovie("HypsterOriginalPlayer").jsPlayClick();
            }
            function callFlash_pause_song() {
                thisMovie("HypsterOriginalPlayer").jsPauseClick();
            }


            function callFlash_set_volume(p_volume) {
                thisMovie("HypsterOriginalPlayer").jsSetVolume(p_volume);
            }




            function callFlash_SeekTo(seek_val) {
                thisMovie("HypsterOriginalPlayer").jsSeekTo(seek_val);
            }
            function callFlash_GetDuration() {
                return thisMovie("HypsterOriginalPlayer").jsGetDuration();
            }
            function callFlash_GetCurrentTime() {
                return thisMovie("HypsterOriginalPlayer").jsGetCurrentTime();
            }


            function thisMovie(movieName) {
                if (navigator.appName.indexOf("Microsoft") != -1) {
                    return window[movieName]
                }
                else {
                    return document[movieName]
                }
            }


            function ytb_player_ready() {
                
                callFlash_next_song(items_arr[CURR_VIDEO]);


                volCont1 = document.getElementById("VolumeControl");
                volCont1.addEventListener("click", VolumeControl_Click, false);


                plTimer = setInterval(function () { currentPlaybackState() }, 1000);

                PSC1 = document.getElementById("PlaybackStatusCont1");
                PSC1.addEventListener("click", changePlaybackStatus_Click, false);
            }
        
        </script>



  </head>






  <body class="MainNHypPlayer" style=" background-image:none; background-color:#202020; ">
   


    <div class="MainRootCont" style=" width:1100px;">
           

            <div id="MainContHolder" style=" margin-top:0px; margin-left:5px; ">
                    
                    <div class="MainPlayerHoder" style="background-color:#424242; border:2px solid #424242;">
                        
                        
    
                        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
                        <div class="PlayerRoot" style=" margin-top:3px; margin-left:2px;">
                
                            <div id="HypsterOriginalPlayer"></div>
                            <script type="text/javascript">
                                 
                                var vars = {
                                    mediaType: "",
                                    userID: "0",
                                    playlistID: "0",
                                    shuffle: "0",
                                    autoplay: "false"
                                };
                                var params = {
                                    allowFullScreen: "true",
                                    allowScriptAccess: "always"
                                };
                                var attributes = {
                                    id: "HypsterOriginalPlayer",
                                    name: "HypsterOriginalPlayer"
                                };
                                
                                swfobject.embedSWF("/scripts/dsk_HypsterOriginalPlayer.swf", "HypsterOriginalPlayer", "605", "330", "10.3.0", "/Scripts/expressInstall.swf", vars, params, attributes);
			                </script>
                
                        </div>
                        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->







                        <div id="PlaybackStatusCont1" style=" float:left; width:100%; height:3px; background-color:#656565; cursor:pointer; " onmouseover="PSC_over()" onmouseout="PSC_out()" >
                            
                            <div id="PlaybackStatusInnrCont1" style=" position:relative; width:100%; height:3px; background-color:#656565; cursor:pointer; z-index:10000; ">
                                <div id="PlaybackStatus1" style=" float:left; width:0%; height:3px; background-color:#f9a317; ">
                                </div>
                            </div>

                        </div>



                        <div class="ControlBar" style="background-color:#424242; border-top:2px solid #424242;" >
            
                            <div id="Prev_btn" onclick="PlayPrevVideo();" title="Prev"></div>
                
                            <div id="PlPs_btn" onclick="PlayPauseVideo();" title="Play/Pause"></div>
            
                            <div id="Next_btn" onclick="PlayNextVideo();" title="Next"></div>

                            <div id="Shuffle_btn" onclick="ShuffleSongs();" title="Shuffle"></div>

                            <div id="Mute_btn_cont" onmouseover="SoundMouseOver();" onmouseout="SoundMouseOut();" title="Mute/Unmute">
                                
                                <div id="Mute_btn" onclick="MuteSound();" title="Mute/Unmute"></div>

                                <div id="VolumeControl">
                                    <div id="VolumeControlVal"></div>
                                </div>
                            </div>

                        </div>

                    </div>






                    <div class="MainAdsHoder">

                        <div class="AdUntL" style="background-color:#424242; border:2px solid #424242;">
                                <div id="SideAd1_id2328971cvbc"></div>
                                <!-- 06_25 -->
                                
                        </div>


                        <div class="AdUntR" style="background-color:#424242; border:2px solid #424242;">
                                <div id="SideAd2_w8392791skc"></div>
                                <!-- 06_25 -->
                                
                        </div>

                    </div>


            </div>





            <div class="MainPlaylistHolder" style=" width:450px; height:644px; margin-top:0px; background-color:#424242; border:2px solid #424242;">

              
                <div id="PlayerPlaylistHolder1" style=" width:449px; height:644px; ">
                    @for (int i = 0; i < Model.songs_list.Count; i++)
                    {
                        <div id="PlItem_@i" class="playlistItemC">
                            
                            <img alt="" src="http://i.ytimg.com/vi/@Model.songs_list[i].YoutubeId/0.jpg" onclick="plVClick('@Model.songs_list[i].YoutubeId', @i)" />
                            <div id="songC_@i" class="songTtl" onclick="plVClick('@Model.songs_list[i].YoutubeId', @i)">
                                @Model.songs_list[i].Title
                            </div>
                            
                            <div id="songA_@i" class="skpSngBtn" onclick="skipSong(@i);">
                                skip
                            </div>

                        </div>
                    }
                </div>

            </div>


    </div>



    <!-- hide back -->
    <div class="Trans_BACK" id="HideBackDiv" onclick="Show_Content();"></div>
    <div id="popupContainer"></div>
    <!-- hide back -->



    <script type="text/javascript">
        
        
        var PlbkBar_W = 609;
        var volContBar_W = 43;

        var player;
        var plTimer;
        var PSC1;
        var volCont1;
        


        var skip_items_arr = new Array();

        function actAclick(object, index)
        {
            $("#songC_" + index).css("width", "255px");
            $(object).css("width", "40px");
            $(object).html("skip");
        }

        function actRclick(object, index)
        {
            $("#songC_" + index).css("width", "285px");
            $(object).css("width", "12px");
            $(object).html(">");
        }

        function skipSong(index)
        {
            $("#PlItem_" + index).css("display", "none");
            skip_items_arr.push(index);

            if(index == CURR_VIDEO)
            {
                PlayNextVideo();
            }


            //trkskip
            $.ajax({
                type: "POST",
                url: "/home/trkskip/" + items_arr[index],
                async: true,
                success: function (data) {
                }
            });
            
        }
        





        function currentPlaybackState()
        {
            var pers = (callFlash_GetCurrentTime() / callFlash_GetDuration()) * 100;
            
            if(pers > 0)
            {
                $("#PlaybackStatus1").css("width", pers + "%");
            }
            else
            {
                $("#PlaybackStatus1").css("width", "0%");
            }
        }

        function changePlaybackStatus_Click(e)
        {
            var x;
            var y;
            if (e.pageX || e.pageY) { 
                x = e.pageX;
                y = e.pageY;
            }
            else { 
                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; 
                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; 
            } 
            x -= PSC1.offsetLeft;
            y -= PSC1.offsetTop;

            

            var pers = (x / PlbkBar_W) * 100;

            
            var sec_pl = (pers * callFlash_GetDuration()) / 100;
            callFlash_SeekTo(sec_pl);
        }




        function PSC_over()
        {
            $("#PlaybackStatusInnrCont1").css("margin-top","-2px");
            $("#PlaybackStatusInnrCont1").css("height","6px");
            $("#PlaybackStatus1").css("height","6px");
        }

        function PSC_out()
        {
            $("#PlaybackStatusInnrCont1").css("margin-top","0px");
            $("#PlaybackStatusInnrCont1").css("height","3px");
            $("#PlaybackStatus1").css("height","3px");
        }

        






        function plVClick(video_id, i) {
            
            CURR_VIDEO = i;
            Higlight_Item(CURR_VIDEO);

            callFlash_next_song(items_arr[CURR_VIDEO]);

            Reps('dsk');

            PLAY_STATE = "1";
            $("#PlPs_btn").css("background-image","url('/imgs/player/pause_icn.jpg')");
        }





        function PlayPrevVideo() {

            if(CURR_VIDEO > 0)
            {
                CURR_VIDEO = CURR_VIDEO - 1;
            }


            for(var j=0; j<skip_items_arr.length; j++)
            {
                if(skip_items_arr[j] == CURR_VIDEO){
                    PlayPrevVideo();
                }
            }

            callFlash_prev_song(items_arr[CURR_VIDEO]);

            
            Higlight_Item(CURR_VIDEO);


            PLAY_STATE = "1";
            $("#PlPs_btn").css("background-image","url('/imgs/player/pause_icn.jpg')");

        }




        function PlayNextVideo() {
            
            if(CURR_VIDEO < items_arr.length)
            {
                CURR_VIDEO = CURR_VIDEO + 1;
            }
            else
            {
                return;
            }


            for(var j=0; j<skip_items_arr.length; j++)
            {
                if(skip_items_arr[j] == CURR_VIDEO){
                    PlayNextVideo();
                }
            }


            Reps('dsk');

            
            callFlash_next_song(items_arr[CURR_VIDEO]);

            Higlight_Item(CURR_VIDEO);


            PLAY_STATE = "1";
            $("#PlPs_btn").css("background-image","url('/imgs/player/pause_icn.jpg')");

        }



        var PLAY_STATE = "0";
        var CURR_VIDEO = -1;
        var SOUND_STATE = 1;


        function PlayPauseVideo() {
            
            if(PLAY_STATE == "0"){ //IF NOT STARTED START
    
                callFlash_play_song();

                PLAY_STATE = "1";
                $("#PlPs_btn").css("background-image","url('/imgs/player/pause_icn.jpg')");
            }
            else { //IF STARTED NEED TO STOP
                
                callFlash_pause_song();

                PLAY_STATE = "0";
                $("#PlPs_btn").css("background-image","url('/imgs/player/play_icn.jpg')");
            }
        }



        var items_arr = new Array();
        @for (int i = 0; i < Model.songs_list.Count; i++)
        {
            <text>items_arr[@i] = '@Model.songs_list[i].YoutubeId';</text>
        }
        if(items_arr.length > 1)
        {
            $("#Prev_btn").css("display","block");
            $("#Next_btn").css("display","block");
            $("#Shuffle_btn").css("display","block");
        }
        else
        {
            $("#Prev_btn").css("display","none");
            $("#Next_btn").css("display","none");
            $("#Shuffle_btn").css("display","none");
        }






        
        function Higlight_Item(activeNum)
        {
            $(".playlistItemC").css("background-color","#292929");
            $("#PlItem_" + activeNum).css("background-color","#d88700");


            var offset_hlt = 0;
            for(var j=0; j<skip_items_arr.length; j++)
            {
                if(skip_items_arr[j]<=CURR_VIDEO)
                {
                    offset_hlt = offset_hlt + 1;
                }
            }

            var vertical_position = 0;
            vertical_position = ((CURR_VIDEO-offset_hlt)*46);

            
            vertical_position = vertical_position - (46*2);
            

            $("#PlayerPlaylistHolder1").scrollTop(vertical_position);
        }
       


        function ShuffleSongs()
        {
            var object = document.getElementById("dr_PlaylistList");
            $("#PlayerPlaylistHolder1").html("");


            $.ajax({
                    type: "POST",
                    url: "/playlist/getPlaylistDetailsPlayer?PL_ID=@ViewBag.PlaylistID&US_ID=@ViewBag.UserID" + "&Sort=Rand",
                    async: true,
                    success: function (data) {
                        $('#PlayerPlaylistHolder1').html(data);
                    }
                });
        }


        function MuteSound()
        {
            if(SOUND_STATE == 1)
            {
                callFlash_set_volume(0);

                SOUND_STATE = 0;

                $("#Mute_btn").css("background-image","url('/imgs/player/unmute_icn.jpg')");
            }
            else
            {
                callFlash_set_volume(100);

                SOUND_STATE = 1;

                $("#Mute_btn").css("background-image","url('/imgs/player/mute_icn.jpg')");
            }

        }



        var song_title = "";
        var song_guid = "";

        function AddSong_CLICK() {
            song_guid = getQuerystring_str("v", player.getVideoUrl());
            ShowAddToMyPlaylistPopup("?song_guid=" + song_guid + "&song_title=" + song_title);
        }


        function AddNewPlaylistLikeComplete()
        {
            $("#PlstLikeBtn").css("background","#353535 url('/imgs/player/like_playlist_icn_selected.jpg') no-repeat center");
        }






        function SoundMouseOver()
        {
            $("#Mute_btn_cont").css("width","80px");
        }

        function SoundMouseOut()
        {
            $("#Mute_btn_cont").css("width","33px");
        }

        function VolumeControl_Click(e)
        {
            var x;
            var y;
            if (e.pageX || e.pageY) { 
                x = e.pageX;
                y = e.pageY;
            }
            else { 
                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; 
                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; 
            } 
            x -= volCont1.offsetLeft;
            y -= volCont1.offsetTop;

            
            var pers = (x / volContBar_W) * 100;
            callFlash_set_volume(pers);


            SOUND_STATE = 1;
            $("#Mute_btn").css("background-image","url('/imgs/player/mute_icn.jpg')");
            
            $("#VolumeControlVal").css("width", pers + "%");
        }



        function Reps(a) {
            $.ajax({
                type: "POST",
                url: "/home/reps/" + items_arr[CURR_VIDEO] + "?a=" + a + "&sid=" + $("#si_" + items_arr[CURR_VIDEO]).val(),
                async: true,
                success: function (data) {
                }
            });
        }


    </script>





    <div id="TraceTxt" style="display:none;"></div>
    <div class="Trans_BACK" id="HideBackDiv_PopupPlayer" onclick="Show_Content_PopupPlayer();"></div>
    <div id="popupContainer_PopupPlayer"></div>
    



    <script type="text/javascript">
        (function (w, d, s, p, v, e, r) {
            w['$petametrics_var'] = v; w[v] = w[v] || function () {
                (w[v].q = w[v].q || []).push(arguments)
            }; w[v].l = 1 * new Date(); e = d.createElement(s), r = d.getElementsByTagName(s)[0]; e.async = 1; e.src = p;
            r.parentNode.insertBefore(e, r)
        })(window, document, 'script', '//cdn.petametrics.com/p.js', '$p');

        $p("init", "nrrpkjjff1ol62vk");
        $p("send", "pageview");
    </script>



    <script type="text/javascript">
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-28695705-1', 'auto', { 'name': 'baron' });
        ga('baron.send', 'pageview');
        ga('create', 'UA-99868480-1', 'auto', { 'name': 'junemedia' });
        ga('junemedia.send', 'pageview');
    </script>






   
  </body>
</html>























