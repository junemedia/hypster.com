<!DOCTYPE html>

@model hypster.ViewModels.videoPlayerViewModel
@{
    Layout = null;
    int song_limit = Int32.Parse(System.Configuration.ConfigurationManager.AppSettings["Song_LIMIT"]);
}



<html>
  <head>
        
        <meta charset="utf-8" />
        <meta name="viewport" content="width=515">
        <title>@ViewBag.PageTitle</title>
        <meta name="description" content="@ViewBag.Desc Create a free music playlist and listen to 10 millions music playlists." />
        


        <script src="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css"  type="text/javascript"></script>
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"  type="text/javascript"></script>
        <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"  type="text/javascript"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>


        
        @Scripts.Render("~/areas/m/scripts/mhypScript.js?id=61729381")
        @Scripts.Render("~/areas/m/scripts/mhypMPLScript.js?id=6129381")
        
        <link href="/areas/m/css/mSite.css?id=61729381" rel="stylesheet" type="text/css" />
        <link href="/areas/m/css/mPlayer.css?id=61729381" rel="stylesheet" type="text/css" />

  </head>






  <body class="MainNHypPlayer" style=" overflow:hidden;">
   <!--div class="srclArea1"-->


    <div class="MainRootCont" >
            

            <div style=" float:left; width:615px;" >

                <div style=" float:left; width:100%; height:27px; border-radius:3px; background-color:#000000; margin-left:0;">
                    
                    <a style=" float:left;" href="http://hypster.com" target="_blank">
                        
                        <img style=" float:left; margin:8px 0 0 6px; cursor:pointer;" alt="Hypster Logo" src="/imgs/pmusicp/hyp_logo_pp.png" /> 
                        <div style=" float:left; margin:2px 0 0 10px; font-size:17px;">- FREE MUSIC PLAYLIST</div>
                    </a>

                </div>




                <div id="MainContHolder" style=" margin:10px 0 0 0;">
                    
                    
                        <div class="MainPlayerHoder">
                        
                        
    
                            <div id="player"></div>


                            <div id="PlaybackStatusCont1" style=" float:left; width:100%; height:3px; background-color:#656565; cursor:pointer; " onmouseover="PSC_over()" onmouseout="PSC_out()" >
                            
                                <div id="PlaybackStatusInnrCont1" style=" position:relative; width:100%; height:3px; background-color:#656565; cursor:pointer; z-index:10000; ">
                                    <div id="PlaybackStatus1" style=" float:left; width:0%; height:3px; background-color:#f9a317; ">
                                    </div>
                                </div>

                            </div>



                            <div class="ControlBar">
            
                                <div id="Prev_btn" onclick="PlayPrevVideo();" title="Prev"></div>
                
                                <div id="PlPs_btn" onclick="PlayPauseVideo();" title="Play/Pause"></div>
            
                                <div id="Next_btn" onclick="PlayNextVideo();" title="Next"></div>

                                <div id="Shuffle_btn" onclick="ShuffleSongs();" title="Shuffle"></div>

                                <div id="Mute_btn_cont" onmouseover="SoundMouseOver();" onmouseout="SoundMouseOut();" title="Mute/Unmute">
                                
                                    <div id="Mute_btn" onclick="MuteSound();" title="Mute/Unmute"></div>

                                    <div id="VolumeControl"><div id="VolumeControlVal"></div></div>
                                </div>



                                <div onclick="AddSong_CLICK()" style=" @if (User.Identity.IsAuthenticated == false){<text>display:none;</text>} float:right; height:32px; line-height:32px; margin:2px; background:#353535; border-radius:3px; text-align:center; font-size:16px; color:#FFFFFF; cursor:pointer; font-weight:bold; ">
                        
                                    <div id="addsngtxt" style=" float:right; min-width:10px; margin:1px 4px 0 2px; font-size:12px; color:#f9a317; cursor:pointer;">
                                        ADD SONG TO MY PLAYLIST
                                    </div>
                                    <div id="AddNSongBtn" title="Add to playlist">
                                    </div>

                                </div>





                            
                                <div id="LikePlaylist" title="Like this playlist" style=" @if (User.Identity.IsAuthenticated == false){<text>display:none;</text>} @if (ViewBag.PlaylistLikes == null){<text>display:none;</text>}">
                        
                                    <div style=" float:left; margin:0 5px 0 5px; ">
                                        @using (Ajax.BeginForm("AddNewPlaylistLike", "playlist", new AjaxOptions { UpdateTargetId = "LikeNumContH", HttpMethod = "POST", OnComplete = "AddNewPlaylistLikeComplete" }))
                                        {
                                            <input id="PlstLikeBtn" type="submit" value="" title="Like & Save" style=" float:left; width:23px; height:23px; background:#353535 url('/imgs/player/like_playlist_icn.jpg') no-repeat center; margin:5px 0 0 0;"  />
                            
                                            <input type="hidden" name="Playlist_ID" id="Playlist_ID" value="@ViewBag.PlaylistID" />
                                            <input type="hidden" name="Owner_ID" id="Owner_ID" value="@ViewBag.UserID" />
                                        }
                                    </div>
                                
                                </div>



                            </div>

                        </div>



                        <div class="MainAdsHoder">

                            <div class="AdUntL">
                                    <div id="SideAd1_id2328971cvbc">
                                        @Html.Partial("~/Views/hypAds/ad_300x250.cshtml")
                                    </div>
                                    <!-- 06_25 -->
                                    
                            </div>


                            <div class="AdUntR">
                                    <div id="SideAd2_w8392791skc">
                                        @Html.Partial("~/Views/hypAds/ad_300x250.cshtml")
                                    </div>
                                    <!-- 06_25 -->
                                    
                            </div>

                        </div>




                        
                        <div class="MainPlaylistHolder" style=" margin:10px 0 0 0;">

                            @if (User.Identity.IsAuthenticated)
                            {
                                <select id="dr_PlaylistList" onchange="change_player_playlist(this);">
                                    @foreach (hypster_tv_DAL.Playlist item in Model.userPlaylists_list)
                                    {
                                        <option value="@item.id" @if (ViewBag.PlaylistID != null && item.id == ViewBag.PlaylistID)
                                                                 { <text>selected="selected"</text> } >@item.name</option>
                                    }
                                </select>
                            }
                            else
                            {
                                <div style=" float:left; width:100%; height:35px; overflow:hidden;">
                                    <h1 style=" color:#dedede; font-size:20px; margin:0px; padding:3px; line-height:25px; ">
                                        @ViewBag.PlaylistName
                                    </h1>
                                </div>
                            }
        

                
                            <div id="PlayerPlaylistHolder1">
                                @for (int i = 0; i < Model.songs_list.Count; i++)
                                {
                                    <div id="PlItem_@i" class="playlistItemC">
                            
                                        <img alt="" src="http://i.ytimg.com/vi/@Model.songs_list[i].YoutubeId/0.jpg" onclick="plVClick('@Model.songs_list[i].YoutubeId', @i)" />
                                        <div id="songC_@i" class="songTtl" onclick="plVClick('@Model.songs_list[i].YoutubeId', @i)">
                                            @Model.songs_list[i].Title
                                        </div>
                                        <input type="hidden" id="si_@Model.songs_list[i].YoutubeId" value="@Model.songs_list[i].id" />
                            
                                        <div id="songA_@i" class="skpSngBtn" onclick="skipSong(@i);">
                                            skip
                                        </div>

                                    </div>
                            
                                    if (i == song_limit)
                                    {
                                        <div class="LoadMoreSongs_btn" onclick="LoadMoreSongsPlaylist()" style=" float:left; width:98.5%; height:44px; line-height:44px; overflow:hidden; background-color:#454545; margin:0 0 2px 2px; border-radius:1px; text-align:center; cursor:pointer; ">
                                            Load More Songs...
                                        </div>
                                        break;
                                    }
                                }
                            </div>


                            <div style=" float:left; width:397px; height:33px; margin:3px 0 0 2px; background-color:#232323; border-radius:3px;" >

                        
                                @if (@ViewBag.PlaylistLikes != null)
                                {
                                    <div class="mplViewsNB">
                                        <div id="LikeNSave">Likes:</div>
                                        <div id="LikeNumContH">@ViewBag.PlaylistLikes</div>
                                    </div>
                                }
                        
                                @if (@ViewBag.PlaylistViews != null)
                                {
                                    <div class="mplLikesNB">
                                        <div id="ViewsNSave">Views:</div>
                                        <div id="ViewsNumContH">@ViewBag.PlaylistViews</div>
                                    </div>
                                }
                        

                        
                        
                                <div class="mplSendFeedback" onclick="ShowSubmitFeedbackPopup()">
                                    <img alt="send feedback" src="/imgs/player/feedback_icn.jpg" />
                                    <div>Send us feedback</div>
                                </div>
                        
                            </div>

                        </div>



                </div>









            </div>







            <div id="RtScrAr" style=" display:none; float:left; width:1030px;">

                <div id="currPlS1" style=" overflow:hidden; font-weight:bold;">
                    &nbsp;<span style="color:#fcf088;">TAGS:</span> 
                    @if (ViewBag.TagsList != null)
                    {
                        foreach (var item in ViewBag.TagsList)
                        {
                            <span style=" cursor:pointer;" onclick="srchTagS('@item');">@item</span><text>,&nbsp;</text>
                        }
                    }
                </div>

                <div class="exPlInnrCH">
                    <div class="sliderBtnLR" onclick="ScrollContF(this);">></div>
                    <div id="PopPlstsCH1"></div>
                </div>
            </div>




    <!--/div-->




    







    <!-- hide back -->
    <div class="Trans_BACK" id="HideBackDiv" onclick="Show_Content();"></div>
    <div id="popupContainer"></div>
    <!-- hide back -->



    <script type="text/javascript">
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);



        PlbkBar_W = 609;
        volContBar_W = 43;

        curr_playlist_id = '@ViewBag.PlaylistID';
        curr_user_id = '@ViewBag.UserID';
        iua = '@User.Identity.IsAuthenticated';
        desc_length = '@ViewBag.DescLength';
        isNP = 'Y';



        
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                width: '600',
                height: '340',
                @if(Model.songs_list.Count > 0)
                {
                    <text>videoId: '@Model.songs_list[0].YoutubeId',</text>
                }
                playerVars: { 'autoplay': 0, 'controls': 0 },
                events: {
                    'onReady': onPlayerReady
                }
            });
            

            plTimer = setInterval(function () { currentPlaybackState() }, 1000);

            PSC1 = document.getElementById("PlaybackStatusCont1");
            PSC1.addEventListener("click", changePlaybackStatus_Click, false);


            volCont1 = document.getElementById("VolumeControl");
            volCont1.addEventListener("click", VolumeControl_Click, false);

            @if(Model.songs_list.Count > 0)
            {
                <text>CURR_VIDEO = 0;</text>
            }
        }
        
        
        


        function change_player_playlist(object) {
            window.location = "/m/mplaylists/user/@(ViewBag.Username)?" + object[object.selectedIndex].value;
        }

        var isReady = false;
        function onPlayerReady(event) {
            if(isReady == false)
            {
                player.addEventListener("onStateChange", "onPlayerStateChange");
                player.addEventListener("onError", "onError");

                player.setVolume(85);

                @if (ViewBag.AUTO_PLAY != null && ViewBag.AUTO_PLAY == "0")
                {
                }
                else
                {
                    <text>
                    if (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows()) {
                        //m
                    }
                    else
                    {
                        CURR_VIDEO = -1;
                        PlayNextVideo();

                        //$("#RtScrAr").css('display','block');
                    }
                    </text>
                }

                isReady = true;


                setTimeout(function(){SharesNum()}, 3000);
            }
        }



        var items_arr = new Array();
        @for (int i = 0; i < Model.songs_list.Count; i++)
        {
            <text>items_arr[@i] = '@Model.songs_list[i].YoutubeId';</text>


            if (i == song_limit)
            {
                break;
            }
        }
        if(items_arr.length > 1)
        {
            $("#Prev_btn").css("display","block");
            $("#Next_btn").css("display","block");
            $("#Shuffle_btn").css("display","block");
        }
        else
        {
            $("#Prev_btn").css("display","none");
            $("#Next_btn").css("display","none");
            $("#Shuffle_btn").css("display","none");
        }





        function SharesNum()
        {
            var shares_num = $('.button-type-post-share .ra1-pw-button-counter-value').html();
            $.ajax({
                type: "POST",
                url: "/playlist/chSSres?PL_ID=" + curr_playlist_id + "&US_ID=" + curr_user_id + "&SN=" + shares_num,
                async: true,
                success: function (data) {
                }
            });
        }




        function ShuffleSongs()
        {
            var object = document.getElementById("dr_PlaylistList");
            $("#PlayerPlaylistHolder1").html("");


            $.ajax({
                type: "POST",
                url: "/playlist/getPlaylistDetailsPlayer?PL_ID=" + object[object.selectedIndex].value + "&US_ID=@ViewBag.UserID" + "&Sort=Rand",
                async: true,
                success: function (data) {
                    $('#PlayerPlaylistHolder1').html(data);
                }
            });
        }






        function LoadMoreSongsPlaylist()
        {
            curr_playlist_segment = curr_playlist_segment + 1;
            $('.LoadMoreSongs_btn').css('display','none');

            
            $.ajax({
                    type: "POST",
                    url: "/playlist/getPlaylistSegmentPlayer?PL_ID=" + curr_playlist_id + "&US_ID=" + curr_user_id + "&Seg=" + curr_playlist_segment,
                    async: true,
                    success: function (data) {
                        $('#PlayerPlaylistHolder1').append(data);
                    }
                });
        }


        function srchTagS(p_ss)
        {   
            $.ajax({
                    type: "POST",
                    url: "/compatibilityCheck/getCompatibleTagsPlaylists/" + p_ss.replace(/^\s\s*/, '').replace(/\s\s*$/, ''),
                    async: true,
                    success: function (data) {
                        $('#PopPlstsCH1').html(data);
                    }
                });
        }
    </script>








    <div id="TraceTxt" style="display:none;"></div>
    <div class="Trans_BACK" id="HideBackDiv_PopupPlayer" onclick="Show_Content_PopupPlayer();"></div>
    <div id="popupContainer_PopupPlayer"></div>
    

    <script type="text/javascript">
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-28695705-1', 'auto', { 'name': 'baron', 'legacyCookieDomain': 'hypster.com' });
        ga('baron.send', 'pageview');
        ga('create', 'UA-99868480-1', 'auto', { 'name': 'junemedia' });
        ga('junemedia.send', 'pageview');
    </script>


    </div>
  </body>
</html>























