@model hypster.ViewModels.createPlaylist_ViewModel
@{
    ViewBag.Title = "Create Free Playlist | Hypster - free music online - player for tumblr";
    ViewBag.Desc = "Create free playlists, and listen commercial free music.";
    Layout = "~/Areas/m/Views/Shared/_Layout_Mobile.cshtml";
}



<script type="text/javascript">
    active_menu = ".mCreate";
    $(".mCreate").css("background-color", "#191919");
    $("#CreateSub").css("display", "block");

    $(document).ready(function () { RenderPage(); RenderShare(); });
    $(window).resize(function () { RenderPage(); RenderShare(); });
</script>









<div class="boxContRight boxContRightTop">
    <div id="listenSlide1" class="slideRight" style=" min-height:600px; ">
            

            <div style=" float:left; width:100%;">
                <div id="ShrContH1" style=" float:left; height:1px;">
                    <div style=" position:relative; top:5px; left:-1045px;">
                    
                        <div style=" float:right; width:70px; ">
                                <div class="pw-widget pw-vertical" pw:image="" pw:url="">
                                <a class="pw-button-tumblr pw-look-native"></a>
	                            <a class="pw-button-facebook pw-look-native"></a>
	                            <a class="pw-button-twitter pw-look-native"></a>
	                            <a class="pw-button-post-share"></a>
                                </div>
                                <script src="http://i.po.st/static/v3/post-widget.js#publisherKey=caq8eudavn7j6erou9n3" type="text/javascript"></script>
                        </div>

                    </div>      
                </div> 
            </div>



            <div id="CreatePlaylistSection1" onclick="window.location='/m/mcreate/player';">
                <img alt="" src="/imgs/create/create_player_icon_sm.png" /><br />
                Create Player
            </div>


            <div id="CreatePlaylistSection2" onclick="window.location='/m/mcreate/playlist';">
                <img alt="" src="/imgs/create/create_playlist_icon_sm.png" /><br />
                Create Playlist
            </div>


            <div id="CreatePlaylistSection3" onclick="window.location='/m/mcreate/station';">
                <img alt="" src="/imgs/create/create_station_icon_sm.png" /><br />
                Create Station
            </div>






            <div id="CreateContHolder" style=" float:left; width:100%; background-color:#1d1d1c; margin-top:-1px; ">
                <!-- *************************************CONTENT************************************* -->

                <div class="MainHeadCont">
                        
                    <div class="MainHeadPlaylist">
                        <img src="/imgs/add_icon.png" title="Add New Playlist" onclick="$('#AddNewPlaylist_Container').css('display','block'); $('#AddNewPlstItm1').css('display','none');" />
                        <span>Playlists</span>
                    </div>
                        
                </div>


                <div class="CreatePlaylistCont">


                        <div id="PlaylistsInnrCont1" class="PlaylistsInnrCont" style=" position:relative; top:0px; margin-bottom:15px;">
                            

                            <div id="AddNewPlstItm1" class="AddNewPlstItm" onclick="$('#AddNewPlaylist_Container').css('display','block'); $('.AddNewPlstItm').css('display','none');">
                                + Add new playlist
                            </div>

                            @using (Html.BeginForm("AccountPlaylist_AddNewPlaylist", "maccount"))
                            {
                                <div id="AddNewPlaylist_Container">
                                    <input id="AddPlaylist_Name" name="AddPlaylist_Name" type="text" maxlength="60" />
                                    <input id="AddPlaylist_Save" type="submit" value="Add new playlist" />
                                    <input id="AddPlaylist_Cancel" type="button" value="Cancel" onclick="$('#AddNewPlaylist_Container').css('display','none'); $('.AddNewPlstItm').css('display','block');" />
                                </div>
                            }


                            @foreach (var item in Model.userPlaylists_list)
                            {


                                if (item.id == ViewBag.ActivePlaylistID)
                                {
                                    <div class="PlstItm_Act" onmouseover="this.style.backgroundColor='#282828';" onmouseout="this.style.backgroundColor='#202020';">
                                
                                            <div class="PlstItm_ActTitle" id="textName_cont_@item.id">
                                                
                                                <img alt="Play" src="/imgs/play_icon.png" onclick="OpenPlayerM('/m/mplaylists/user/@User.Identity.Name?@item.id');" />
                                                <div onclick="window.location='/m/mcreate/playlist?playlist_id=@item.id';">
                                                    @item.name
                                                </div>

                                            </div>


                                    
                                            <div id="editName_cont_@item.id" style=" display:none; width:334px; float:left; ">
                                                @using (Html.BeginForm("AccountPlaylists_EditPlaylist", "maccount", FormMethod.Post))
                                                {
                                                    <input class="PlstItm_PlName" name="PlaylistName" id="PlaylistName" type="text" value="@item.name" />
                                                    <input class="PlstItm_PlSave" type="submit" value="Save" />
                                                    <input class="PlstItm_PlSave" type="button" value="Cancel" onclick="Pl_CancelPlaylist(@item.id);" />
                                                    <input name="PlaylistID" id="PlaylistID" type="hidden" value="@item.id" />
                                                }
                                            </div>

                                            <div class="PlstItm_Edt" title="Edit Playlist" onclick="Pl_EditPlaylist(@item.id);"></div>
                                            <div class="PlstItm_Del" title="Delete Playlist" onclick="Pl_DelPlaylist(@item.id);"></div>
                                    </div>
                                }
                                else
                                {
                                    <div class="PlstItm" onmouseover="this.style.backgroundColor='#282828';" onmouseout="this.style.backgroundColor='#202020';">

                                            <div id="textName_cont_@item.id" class="plstII">
                                                
                                                <img alt="Play" src="/imgs/play_icon.png" onclick="OpenPlayerM('/m/mplaylists/user/@User.Identity.Name?@item.id');" />
                                                <div onclick="window.location='/m/mcreate/playlist?playlist_id=@item.id';">
                                                    @item.name
                                                </div>

                                            </div>
                                        

                                            <div id="editName_cont_@item.id" style=" display:none; width:334px; float:left; ">
                                                @using (Html.BeginForm("AccountPlaylists_EditPlaylist", "maccount", FormMethod.Post))
                                                {
                                                    <input class="PlstItm_PlName" name="PlaylistName" id="PlaylistName" type="text" value="@item.name" />
                                                    <input class="PlstItm_PlSave" type="submit" value="Save"/>
                                                    <input class="PlstItm_PlSave" type="button" value="Cancel" onclick="$('#textName_cont_@item.id').css('display','block'); $('#editName_cont_@item.id').css('display','none');" />
                                                    <input name="PlaylistID" id="PlaylistID" type="hidden" value="@item.id" />
                                                }
                                            </div>
                                            
                                        
                                            <div class="PlstItm_Edt" title="Edit Playlist" onclick="Pl_EditPlaylist(@item.id);"></div>
                                            <div class="PlstItm_Del" title="Delete Playlist" onclick="Pl_DelPlaylist(@item.id);"></div>

                                            @using (Html.BeginForm("AccountPlaylists_MakeActivePlaylist", "maccount", FormMethod.Post))
                                            {
                                                <input name="Act_PlaylistID" id="Act_PlaylistID" type="hidden" value="@item.id" />
                                                <input class="PlstItm_MkActive" type="submit" value="DEF" title="Make Default" style=" float:right; width:30px; color:#ABABAB; background:none; " />
                                            }
                                    </div>
                                }





                            }
                           


                        </div>







                        <div class="SongsInnrCont">
                            <!--  PLAYLIST DETAILS  -->


                            <div class="AddNewSong_Container" onclick="window.location='/m/mlisten';">&nbsp;+ Add New Song</div>
                            <div class="AddNewTag_Container" onclick="add_new_tag_nav();">&nbsp;+ Add New Tag</div>
                            <div class="CleanDeadLinks_Container" onclick="clean_dead_links();">&nbsp;Clean Dead Links</div>

                            <div id="sortablePlaylist">
                            @{ int i_counter = 1;}
                            @foreach (var item in Model.userActivePlaylist_Songs_list)
                            {
                                <div class="srt_itm" id="song_@item.playlist_track_id">
                    
                                    <div class="SongTitle" onmouseup="isMOUSE_UP_ON = true;" onmousedown="mouse_down($('#song_@item.playlist_track_id'));" onmouseout="mouse_up($('#song_@item.playlist_track_id'), '@item.playlist_track_id', @ViewBag.ActivePlaylistID );" >
                                        <img class="SongImg" alt="" src="http://i.ytimg.com/vi/@item.YoutubeId/0.jpg" />
                                        @item.Title
                                    </div>
                                    
                                    
                                    <div class="SongItm_Edt" title="Play Song" onclick="OpenPlayerM('/m/mplaylists/song/@item.YoutubeId?@HttpUtility.UrlEncode(item.FullTitle)')"></div>
                                    <div class="SongItm_Del" title="Delete Song" onclick="Pl_DelSong(@item.playlist_track_id, @ViewBag.ActivePlaylistID);"></div>
                                </div>
    
                                i_counter = i_counter + 1;

                                if (i_counter > 400)
                                {
                                    <div id="LoMPlstBtn" class="srt_itm" onclick="load_more_songs_plst_details();">
                                        <div id="LoMPlstBtnHeader" style=" float:left; width:100%; line-height:50px; font-size:21px; text-align:center; color:#fcf088;">
                                            Load more songs for this playlist
                                        </div>
                                    </div>
                                    break;
                                }
                            }
                            </div>




                            @if (Model.userActivePlaylist_Songs_list.Count == 0)
                            {
                                <div class="EmptyPlCont">
                                    <div>Playlist is empty</div>
                                </div>
                            }
                            <div class="AddNewSong_Container" onclick="window.location='/m/mlisten';">&nbsp;+ Add New Song</div>
                            <div class="AddNewTag_Container" onclick="$('#AddNewTag_InnrContainer').css('display','block');">&nbsp;+ Add New Tag</div>
                            <div class="CleanDeadLinks_Container" onclick="clean_dead_links();">&nbsp;Clean Dead Links</div>


                            <div id="tagsConHldr1">
                                <div class="tagsCHHeader1">Tags</div>

                                <div id="tagsMCH1">
                                    @foreach (var item in Model.tags_list)
                                    {
                                        <a class="TagI" href="/tags/@HttpUtility.UrlEncode(item.Tag_Name)">@item.Tag_Name</a>
                                    }
                                    <div id="tagsEditBtn" onclick="loadtagsForEdit(); $('#AddNewTag_InnrContainer').css('display','block');">Manage</div>
                                </div>
                            </div>



                            <div id="AddNewTag_InnrContainer">
                                <input type="text" maxlength="30" name="newTagName" id="newTagName" style=" width:195px; float:left; height:22px; border:none; font-size:13px;" />
                                <input type="hidden" name="newTagPlst" id="newTagPlst" value="@ViewBag.ActivePlaylistID" />
                                <input type="button" value="Add New Tag" onclick="add_new_tag();"  style="float:left; height:25px; margin-left:5px;" />
                                <input type="button" value="Cancel" onclick="$('#AddNewTag_InnrContainer').css('display','none');" style="float:left; height:25px; margin-left:5px;" />
                            </div>




                            <script type="text/javascript">
                                function add_new_tag_nav() {
                                    $('#AddNewTag_InnrContainer').css('display', 'block');
                                    var vrval = $('#AddNewTag_InnrContainer').position().top - $(window).height() / 2 - 50;
                                    $('html').scrollTop(vrval);
                                    $('body').scrollTop(vrval);
                                }



                                function load_more_songs_plst_details() {
                                    $("#LoMPlstBtnHeader").html("Loading...");

                                    $.ajax({
                                        type: "POST",
                                        url: "/m/mcreate/playlistDetailsAD?playlist_id=@ViewBag.ActivePlaylistID",
                                        async: true,
                                        success: function (data) {
                                            $('#LoMPlstBtn').css('display', 'none');
                                            $('#sortablePlaylist').append(data);
                                        }
                                    });
                                }


                                function clean_dead_links()
                                {
                                    Hide_Content();

                                    $(document).scrollTop(0);

                                    $.ajax({
                                        type: "POST",
                                        url: "/m/mplaylist/CleanDeadLinks?PL_ID=@ViewBag.ActivePlaylistID",
                                        async: true,
                                        success: function (data) {
                                            $('#popupContainer').html(data);
                                        }
                                    });
                                }
                            </script>




                            <style>    
                                #sortablePlaylist { list-style-type:none; margin: 0; padding: 0; float:left; width:100%; margin-bottom:8px; }    
                                #sortablePlaylist .srt_itm { float:left; width:95%; height:57px; border-bottom:1px solid #232323; background-color:#232323; cursor:pointer; overflow:hidden; margin-top:4px; }
                            </style>
                            <script type="text/javascript">
                                $(function () { $("#sortablePlaylist").sortable(); $("#sortablePlaylist").disableSelection(); });

                                $(document).ready(function () {
                                    $('.srt_itm').mouseover(function () { $(this).css("background-color", "#292929"); });
                                    $('.srt_itm').mouseout(function () { $(this).css("background-color", "#232323"); });
                                });
                            </script>

                        </div>

                </div>

                <!-- *************************************CONTENT************************************* -->
            </div>




    </div>
</div>










<div class="boxContLeft">
    <div id="listenSlide2" class="slideLeft" style=" min-height:460px;">
            @Html.Action("PopularPlaylists", "mpopular")
    </div>
</div>



