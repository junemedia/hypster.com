@model hypster.ViewModels.MemberPublicPageViewModel
@{
    ViewBag.Title = "Music Page";
    ViewBag.Desc = "";
    Layout = "~/Views/Shared/_Layout_PP.cshtml";
}


<script type="text/javascript" src="/scripts/jscolor/jscolor.js"></script>
<link href="/css/PublicMusicPage.css?id=28729381" rel="stylesheet" type="text/css" />

<script type="text/javascript">
    $(document).ready(function () { RenderPagePP(); });
    $(window).resize(function () { RenderPagePP(); });
</script>


<style type="text/css">
    body
    {
        background:#@(Model.member_page.BackgroundColor) url(/imgs/pmusicp/bb.png) repeat;
    }
    .slideLeftPP
    {
        background-color:#@(Model.member_page.LeftSectionColor);
    }
    .slideRightPP
    {
        background-color:#@(Model.member_page.RightSectionColor);
    }
    .skn1Buttons
    {
    	background-color:#@(Model.member_page.ButtonsBackgroundColor);
        color:#@(Model.member_page.ButtonsColor);
        display:block; float:left; width:244px; height:55px; line-height:55px; text-align:center; font-size:23px; cursor:pointer; margin:0 12px 0 0px;
        border-radius:2px;
    }
    .ContentHeaderInner
    {
        background:#@(Model.member_page.HaFBackgroundColor) url(/imgs/pmusicp/tg.png) repeat-x top;
        border-bottom:3px solid #@(Model.member_page.HaFBackgroundColor);
    }
    .ContentFooterCont
    {
        background:#@(Model.member_page.HaFBackgroundColor) url(/imgs/pmusicp/bg.png) repeat-x bottom;
        border-top:3px solid #@(Model.member_page.HaFBackgroundColor);
    }
    .sknHeader
    {
        display:block; background:none; border:none; float:left; width:99%; height:33px; font-size:21px; font-weight:bold;
        color:#@(Model.member_page.TextColor);
    }
    .sknText
    {
        display:block; background:none; border:none; float:left; width:99%; min-height:33px; font-size:16px;
        line-height:22px; margin-bottom:3px;
        color:#@(Model.member_page.TextColor);
    }
    .skn1songBack
    {
        float:left; width:99%; min-height:50px; 
        background-color:#@(Model.member_page.SongBackgroundColor);
        margin-bottom:3px;
        cursor:pointer;
    }
    .skn1VideoBack
    {
        float:left; width:99%; min-height:500px; 
        background-color:#@(Model.member_page.SongBackgroundColor);
        margin-bottom:8px;
    }

    .sknRimg
    {
        float:left; width:335px; padding:5px; cursor:pointer; 
	    height:250px; overflow:hidden;
    }
    .sknRimg div
    {
	    float:left;
	    width:100%; margin-top:-45px; 
	    height:45px; line-height:40px;
	    background-color:Green;
	    text-align:left;
	    overflow:hidden;
        color:#@(Model.member_page.TextColor);
        background-color:#@(Model.member_page.SongBackgroundColor);
        margin-left:5px;
        font-size:16px;

        display:none;
    }

    #sSongPlayer
    {
        border:3px solid #@(Model.member_page.SongBackgroundColor);
    }
</style>









<div class="boxContRightPP boxContRightTopPP">
    <div class="slideRightPP" style=" min-height:250px;" >
            
            @if (Model.member_page.PublicPage_ID > 0)
            {
                <div id="skn1_PlaylistCont" style=" float:left; width:1040px; margin:-5px 0 0 -5px; ">
                
                    @if (Model.member_page.Playlist_Layout == 2)
                    {
                        <div class="skn1VideoBack">
                            <div id="sSongPlayer" style=" float:left; width:1010px; height:480px; margin:7px;"></div>
                        </div>
                    
                        for (int i = 0; i < Model.songs_list.Count; i++)
                        {
                            <div class="skn1songBack" onclick="pmpPlaySong(@i);">
                                <img alt="" src="http://i.ytimg.com/vi/@Model.songs_list[i].YoutubeId/0.jpg" />
                                <div>&nbsp;@Model.songs_list[i].Title</div>
                            </div>
                        }
                    }
                    else
                    {
                        for (int i = 0; i < Model.songs_list.Count; i++)
                        {
                            <div class="sknRimg" id="song_@i" onclick="pmpPlaySong(@i);">
                                <img alt="" src="http://i.ytimg.com/vi/@Model.songs_list[i].YoutubeId/0.jpg" />
                                <div>&nbsp;@Model.songs_list[i].Title</div>
                            </div>
                        }
                        
                        <div id="sSongPlayer" style=" position:absolute; top:-1000px; left:-1000px; z-index:10000; width:335px; height:250px;"></div>
                    }
                </div>
                
                
                
            }
            else
            {
                <div id="PublicPSection_1">
                        
                        <div style=" float:left; width:1024px; margin:15px 0 0 20px; ">
            
                            <div class="NameTxtCont">
                                <div class="lbl1">Name:</div>
                                <div class="txt1">@Model.curr_user.name</div>
                            </div>

                            <div class="UsNameTxtCont">
                                <div class="lbl1">Username:</div>
                                <div class="txt1">@Model.curr_user.username</div>
                            </div>

                        </div>
        

                        <div style=" float:left; width:1024px; margin:25px 0 0 20px; ">
            
                            <div class="MemberTxtCont">
                                <div class="lbl1">Member Since:</div>
                                <div class="txt1">@Model.curr_user.regdate.ToShortDateString()</div>
                            </div>

                        </div>




                        <div style=" float:left; width:1024px; margin:25px 0 0 20px; ">
            
                            <div class="CityTxtCont">
                                <div class="lbl1">City:</div>
                                <div class="txt1">@Model.curr_user.city</div>
                            </div>

                            <div class="CountryTxtCont">
                                <div class="lbl1">Country:</div>
                                <div class="txt1">@Model.curr_user.country</div>
                            </div>

                            <div class="ZipTxtCont">
                                <div class="lbl1">Zip:</div>
                                <div class="txt1">@Model.curr_user.zipcode</div>
                            </div>

                        </div>



                        <div style=" float:left; width:1024px; margin:25px 0 20px 20px; ">
            
                            <div class="BirthDateHeader"><div>Birth Date:</div></div>

                            <div class="DOBmHeader">
                                <div>@if (Model.curr_user.birth != null)
                                     { @Model.curr_user.birth.Value.Month;
                                     }</div>
                            </div>
                            <div class="DOBdHeader">
                                <div>@if (Model.curr_user.birth != null)
                                     { @Model.curr_user.birth.Value.Day;
                                     }</div>
                            </div>
                            <div class="DOByHeader">
                                <div>@if (Model.curr_user.birth != null)
                                     { @Model.curr_user.birth.Value.Year;
                                     }</div>
                            </div>

                        </div>
                    </div>
            }

    </div>
</div>








<div class="boxContLeftPP">
    <div class="slideLeftPP" style=" min-height:55px;">
        
            <div style=" float:right; width:1024px; line-height:15px; ">
                @if (Model.member_page.showHeader == true)
                {
                <div class="sknHeader">@Model.member_page.header</div><br />
                }

                @if (Model.member_page.showDescription == true)
                {
                <div class="sknText">@Model.member_page.description</div>
                }
            </div>



            <div style=" float:right; width:1024px; margin-top:1px; ">
                
                @if (Model.member_page.autoplay == false && Model.member_page.PublicPage_ID > 0)
                {
                <div class="skn1Buttons" id="skn1Top_Play_Btn" onclick="pmpPlaySong(0);" >Play</div>
                }
            

                @if (Model.member_page.showLikeButtton == true && Model.member_page.PublicPage_ID > 0)
                {
                <div class="skn1Buttons" id="skn1Top_Like_Btn" >
                    
                    <div id="LikeBtnCont">
                        @using (Ajax.BeginForm("AddNewPlaylistLike", "appPlaylist", new AjaxOptions { UpdateTargetId = "LikeNumContH", HttpMethod = "POST", OnComplete = "AddNewPlaylistLikeComplete" }))
                        {
                            <input id="PlstLikeBtn" type="submit" value="Like" />
                            <input type="hidden" name="Playlist_ID" id="Playlist_ID" value="@Model.member_page.Playlist_ID" />
                            <input type="hidden" name="Owner_ID" id="Owner_ID" value="@Model.member_page.Member_ID" />
                        }
                    </div>
                    <div id="LikeNumContH">Like</div>

                </div>
                }

                @if (Model.member_page.showInfoButton == true)
                {
                <div class="skn1Buttons" id="skn1Top_Info_Btn" onclick="uInfoCont_CLICK();" >Info</div>
                }

                @if (Model.member_page.showPhotosButton == true)
                {
                <div class="skn1Buttons" id="skn1Top_Photos_Btn" onclick="uPhotosCont_CLICK();" >Photos</div>
                }
            </div>





            <div id="uInfoCont">
                
                    <div id="PublicPSection_1">
                        
                        <div style=" float:right; width:1024px; margin:15px 0 0 20px; ">
            
                            <div class="NameTxtCont">
                                <div class="lbl1">Name:</div>
                                <div class="txt1">@Model.curr_user.name</div>
                            </div>

                            <div class="UsNameTxtCont">
                                <div class="lbl1">Username:</div>
                                <div class="txt1">@Model.curr_user.username</div>
                            </div>

                        </div>
        

                        <div style=" float:right; width:1024px; margin:25px 0 0 20px; ">
            
                            <div class="MemberTxtCont">
                                <div class="lbl1">Member Since:</div>
                                <div class="txt1">@Model.curr_user.regdate.ToShortDateString()</div>
                            </div>

                        </div>




                        <div style=" float:right; width:1024px; margin:25px 0 0 20px; ">
            
                            <div class="CityTxtCont">
                                <div class="lbl1">City:</div>
                                <div class="txt1">@Model.curr_user.city</div>
                            </div>

                            <div class="CountryTxtCont">
                                <div class="lbl1">Country:</div>
                                <div class="txt1">@Model.curr_user.country</div>
                            </div>

                            <div class="ZipTxtCont">
                                <div class="lbl1">Zip:</div>
                                <div class="txt1">@Model.curr_user.zipcode</div>
                            </div>

                        </div>



                        <div style=" float:right; width:1024px; margin:25px 0 20px 20px; ">
            
                            <div class="BirthDateHeader"><div>Birth Date:</div></div>

                            <div class="DOBmHeader">
                                <div>@if (Model.curr_user.birth != null)
                                     { @Model.curr_user.birth.Value.Month;
                                     }</div>
                            </div>
                            <div class="DOBdHeader">
                                <div>@if (Model.curr_user.birth != null)
                                     { @Model.curr_user.birth.Value.Day;
                                     }</div>
                            </div>
                            <div class="DOByHeader">
                                <div>@if (Model.curr_user.birth != null)
                                     { @Model.curr_user.birth.Value.Year;
                                     }</div>
                            </div>

                        </div>
                    </div>


            </div>


            <div id="uPhotosCont">
                    <div class="imgsICont">
                        @{ int icount = 0; }
                        @foreach (hypster_tv_DAL.Photo item in Model.userPhotos_list)
                        {
                            <div class="photoCont">
                                        
                                @if (item.id > Model.New_User_ID)
                                {
                                    <img onclick="ShowImage('@Url.Content("/userpics/" + @Model.curr_user.username + "/" + @item.id + ".jpg")');" src="@Url.Content("/userpics/" + @Model.curr_user.username + "/" + @item.id + "_s.jpg")" alt="" onerror="this.src='/imgs/user_img_nf.png';" style=" float:left; margin:0 7px 4px 0;" />
                                }
                                else
                                {
                                    <img onclick="ShowImage('@Url.Content("/userpics/" + @item.id + ".jpg")');" src="@Url.Content("/userpics/" + @item.id + "_s.jpg")" alt="" onerror="this.src='/imgs/user_img_nf.png';" style=" float:left; margin:0 7px 4px 0;" />
                                }
                                        
                            </div>
                                if (icount > 12)
                                {
                                    break;
                                }
                                icount = icount + 1;
                        }
                    </div>
            </div>

            

    </div>
</div>




<script type="text/javascript">

@if (Model.member_page.showInfoButton == true)
{
    <text>
    var uInfoCont_ON = false;
    function uInfoCont_CLICK() {
        if (uInfoCont_ON == false) {
            $("#uInfoCont").css("display", "block");
            uInfoCont_ON = true;
        }
        else {
            $("#uInfoCont").css("display", "none");
            uInfoCont_ON = false;
        }
    }
    </text>
}


@if (Model.member_page.showPhotosButton == true)
{
    <text>
    var uPhotosCont_ON = false;
    function uPhotosCont_CLICK() {
        if (uPhotosCont_ON == false) {
            $("#uPhotosCont").css("display", "block");
            uPhotosCont_ON = true;
        }
        else {
            $("#uPhotosCont").css("display", "none");
            uPhotosCont_ON = false;
        }
    }
    </text>
}

function AddNewPlaylistLikeComplete()
{
    $("#LikeBtnCont").css("display","none");
    $("#LikeNumContH").css("display","block");
}


$(document).ready(function(){
    
    
    $(".sknRimg").on("mouseover", function(event){
        $(this).find("div").css('display','block');
    });

    $(".sknRimg").on("mouseout", function(event){
        $(this).find("div").css('display','none');
    });

});
</script>



<script type="text/javascript">
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


    var PLAY_STATE = "0";
    var CURR_VIDEO = -1;
    var SOUND_STATE = 1;
    var items_arr = new Array();

        
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('sSongPlayer', {
            width: '335',
            height: '250',
            playerVars: { 'autoplay': 0, 'autohide':0 },
            events: {
                'onReady': onPlayerReady
            }
        });
    }
        

    function pmpPlaySong(id) {
        CURR_VIDEO = id;

        @if(Model.member_page.Playlist_Layout == 1)
        {
            <text>$("#sSongPlayer").offset({ top: $("#song_" + id).offset().top+7, left: $("#song_" + id).offset().left+7});</text>
        }

        player.loadVideoById(items_arr[CURR_VIDEO], 0, 'default');
    }

    var isReady = false;
    function onPlayerReady(event) {
        if(isReady == false)
        {
            player.addEventListener("onStateChange", "onPlayerStateChange");
            player.addEventListener("onError", "onError");
            isReady = true;

            @if (Model.member_page.autoplay == true)
            {
                <text>pmpPlaySong(0);</text>
            }
        }
    }


    function onError(event){
            
        if(event.data == 5)
			return;

        PlayNextVideo();
    }



    var done = false;
    function onPlayerStateChange(event) {
            
            
        if (event.data == 5) {
            player.playVideo();
            return;
        }


        if (event.data == YT.PlayerState.ENDED) {
            PlayNextVideo();
            return;
        }

        if (event.data == YT.PlayerState.PAUSED) {
            PLAY_STATE = "0";
        }
        if (event.data == YT.PlayerState.PLAYING) {
            PLAY_STATE = "1";
        }
    }


        

    function plVClick(video_id, i) {
            
        CURR_VIDEO = i;
        Higlight_Item(CURR_VIDEO);

        player.loadVideoById(video_id, 0, 'default');

        PLAY_STATE = "1";
    }





    function PlayPrevVideo() {

        if(CURR_VIDEO > 0)
        {
            CURR_VIDEO = CURR_VIDEO - 1;
        }

        @if(Model.member_page.Playlist_Layout == 1)
        {
            <text>$("#sSongPlayer").offset({ top: $("#song_" + CURR_VIDEO).offset().top+7, left: $("#song_" + CURR_VIDEO).offset().left+7});</text>
        }


        player.stopVideo();
        player.loadVideoById(items_arr[CURR_VIDEO], 0, 'default');
        Higlight_Item(CURR_VIDEO);


        PLAY_STATE = "1";
    }


    function PlayNextVideo() {
            
        if(CURR_VIDEO < items_arr.length)
        {
            CURR_VIDEO = CURR_VIDEO + 1;
        }

        @if(Model.member_page.Playlist_Layout == 1)
        {
            <text>$("#sSongPlayer").offset({ top: $("#song_" + CURR_VIDEO).offset().top+7, left: $("#song_" + CURR_VIDEO).offset().left+7});</text>
        }

            
        player.stopVideo();
        player.loadVideoById(items_arr[CURR_VIDEO], 0, 'default');
        Higlight_Item(CURR_VIDEO);


        PLAY_STATE = "1";
    }




    @for (int i = 0; i < Model.songs_list.Count; i++)
    {
        <text>items_arr[@i] = '@Model.songs_list[i].YoutubeId';</text>
    }
</script>

