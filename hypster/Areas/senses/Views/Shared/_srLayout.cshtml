<!DOCTYPE html>
<html>
<head>


    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">

    <!--meta name="viewport" content="width=1150" /-->
    <!--meta name="viewport" content="width=600" /-->

    @if (Request.Cookies["hypAPPind"] != null && Request.Cookies["hypAPPind"].Value != "")
    {
        <text><meta id="vpM" name="viewport" content="width=600, user-scalable=0" /></text>
    }
    else
    {
        <text><meta id="vpM" name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" /></text>
    }

    


    <title>@ViewBag.Title</title>
    <meta name="alexaVerifyID" content="D1zuW6QmyfkVJqITiYkg7ecUz5k" />
    <meta name="description" content="@ViewBag.Desc" />
    
    
    <link src="//code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script src="//code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="//code.jquery.com/ui/1.10.1/jquery-ui.js" type="text/javascript"></script>
    <script src="//ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>


    @Scripts.Render("~/bundlesSENSES/scripts")
    @Styles.Render("~/bundlesSENSES/css")


    @if (Request.Cookies["hypAPPind"] != null && Request.Cookies["hypAPPind"].Value != "")
    {
        <link id="mStyles1" href="/areas/senses/css/SiteM.css?id=24007210304" rel="stylesheet" type="text/css" />
    }
    else
    {
        <link id="mStyles1" href="/areas/senses/css/Site.css?id=24007210304" rel="stylesheet" type="text/css" />
    }



    <script type="text/javascript">
        var is_API_Ready = false;
        var is_speech_sound = 1;
        var curr_chrome_version = 0;

        var speechDomain = "@System.Configuration.ConfigurationManager.AppSettings["voice_Domain"]";
        var currUser = @if (User.Identity.IsAuthenticated)
                       { <text>"@User.Identity.Name";</text> }
                       else
                       {<text>"";</text>}

        

        function onYouTubeIframeAPIReady() {
            is_API_Ready = true;
        }



        $(document).ready(function () {

            check_browser();

            check_sound_cookie();

        });



        $(window).resize(function () {

            check_sound_cookie();

        });











        function check_sound_cookie() {

            @if (Request.Cookies["hypAPPind"] != null && Request.Cookies["hypAPPind"].Value != "")
            {
                <text>
                    is_speech_sound = 0;
                    $(".cir_sound").css('display', 'none');
                </text>
            }
            else
            {
                <text>
                    $(".cir_sound").css('left', ($(window).width() - 90) + 'px');
                    $(".cir_sound").css('top', '0px');
                    $(".cir_sound").css('display', 'block');
                    $(".cir_sound").on("click", function () {
                        WebSoundSpeech();
                    });

                    var check_sound_cookie = getCookie("speech_sound");
                    if (check_sound_cookie != "") {
                        is_speech_sound = check_sound_cookie;

                        if (is_speech_sound == 1) {
                            $(".cir_sound").html("SPEECH:ON");
                        }
                        else {
                            $(".cir_sound").html("SPEECH:OFF");
                        }
                    }
                    else { //is undefined - then turn on sound
                        is_speech_sound = 1;

                        if (is_speech_sound == 1) {
                            $(".cir_sound").html("SPEECH:ON");
                        } 
                    }
               </text>
            }
        }


        function check_browser() {
            
            

            if (navigator.userAgent.indexOf('Chrome') != -1 && parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf('Chrome') + 7).split(' ')[0]) >= 15) {//Chrome

                if (document.URL.indexOf("http") >= 0) {
                    window.location = document.URL.replace("http", "https");
                }

            } else {

                if (document.URL.indexOf("https") >= 0) {
                    window.location = document.URL.replace("https", "http");
                }

            }

        }


        function WebSoundSpeech() {

            if ($(".cir_sound").html() == "SPEECH:ON") {

                cancelSpeech();


                $(".cir_sound").html("SPEECH:OFF");
                is_speech_sound = 0;

                $.ajax({
                    type: "POST",
                    url: "/senses/sAccount/SetSpeechSound/" + is_speech_sound + "?rid=" + Math.random(),
                    async: true,
                    success: function (data) {
                    }
                });

            }
            else {
                $(".cir_sound").html("SPEECH:ON");
                is_speech_sound = 1;

                $.ajax({
                    type: "POST",
                    url: "/senses/sAccount/SetSpeechSound/" + is_speech_sound + "?rid=" + Math.random(),
                    async: true,
                    success: function (data) {
                    }
                });
            }
        }

    </script>




    <script type="text/javascript">
        function onSilverlightError(sender, args) {
            var appSource = "";
            if (sender != null && sender != 0) {
                appSource = sender.getHost().Source;
            }

            var errorType = args.ErrorType;
            var iErrorCode = args.ErrorCode;

            if (errorType == "ImageError" || errorType == "MediaError") {
                return;
            }

            var errMsg = "Unhandled Error in Silverlight Application " + appSource + "\n";

            errMsg += "Code: " + iErrorCode + "    \n";
            errMsg += "Category: " + errorType + "       \n";
            errMsg += "Message: " + args.ErrorMessage + "     \n";

            if (errorType == "ParserError") {
                errMsg += "File: " + args.xamlFile + "     \n";
                errMsg += "Line: " + args.lineNumber + "     \n";
                errMsg += "Position: " + args.charPosition + "     \n";
            }
            else if (errorType == "RuntimeError") {
                if (args.lineNumber != 0) {
                    errMsg += "Line: " + args.lineNumber + "     \n";
                    errMsg += "Position: " + args.charPosition + "     \n";
                }
                errMsg += "MethodName: " + args.methodName + "     \n";
            }

            throw new Error(errMsg);
        }
    </script>





    <script type="text/javascript">
        //calling Silverlight method
        var slCtl = null;
        function pluginLoaded(sender, args) {
            slCtl = sender.getHost();
        }
    </script>


    
</head>










<body style=" margin:0px; padding:0px;" onKeyUp="HandleKeyAction(event)">
    <div id="mainCH1">
    

        <div id="contCH1" style=" float:left; width:100%; min-height:600px; background-color:#FFFFFF;">

                <div style=" float:left; width:100%;">
                    <div id="bContHolder1" style=" float:left; width:100%; color:#FFFFFF; ">
                        @RenderBody()
                    </div>
                </div>

        </div>



        <div class="cir_sound">SPEECH:ON</div>
        <div class="cir_mic"></div>

    
        @Html.Partial("~/Areas/senses/Views/Shared/pr_MicMenu.cshtml")


        <iframe id="speechContainer" src="" style=" position:absolute; top:450px; left:-10px; width:1px; height:1px; background-color:#FFFFFF;" ></iframe>


    </div>







    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-28695705-11', 'auto');
        ga('send', 'pageview');

    </script>

</body>
</html>
