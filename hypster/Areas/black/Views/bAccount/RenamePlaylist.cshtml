@model hypster_tv_DAL.Playlist
@{
    Layout = null;
}



<div class="cir_1"> 
    
    <div onclick="clickBack()" style=" float:left; width:100%; margin:100px 0 0 90px; cursor:pointer; ">
        << BACK
    </div>

</div>




<div class="cir_2"> 

    <div id="msgBox1">

        <div style=" margin:0 0 10px 0;">
            Rename @Model.name playlist
        </div>


        <input id="newPlaylistName" name="newPlaylistName" type="text" value="@Model.name" style=" width:330px; " />
        <input id="newPlaylistID" name="newPlaylistID" type="hidden" value="@Model.id" />
        <br />

        <div onclick="setAsDefaultPlaylist();" style=" float:left; width:200px; height:30px; line-height:30px; margin:13px 0 0 0; background-color:#CC9933; border-radius:3px; cursor:pointer; text-align:center;">
            Set as default
        </div>

        <div onclick="deletePlaylist();" style=" float:left; width:120px; height:30px; line-height:30px; margin:13px 0 0 10px; background-color:#CC9933; color:#CC0000; border-radius:3px; cursor:pointer; text-align:center;">
            Delete
        </div>

        <div onclick="editPlaylist();" style=" float:left; width:200px; height:30px; line-height:30px; margin:13px 0 0 0; background-color:#CC9933; border-radius:3px; cursor:pointer; text-align:center;">
            Edit
        </div>



    </div>

</div>









<script type="text/javascript">
    if (is_speech_sound == 1) {
        window.speechSynthesis.cancel();
        var msg = new SpeechSynthesisUtterance('Rename @Model.name. Please enter new name and press ENTER.');
        window.speechSynthesis.speak(msg);
    }
</script>


<script type="text/javascript">

    var CURR_ACTIVE_MENU = 0;
    var MENU_COUNT = 0;



    $(document).ready(function () {
        $("#newPlaylistName").focus();
        $("#newPlaylistName").select();
    });




    function HandleKeyAction(e) {

        if (is_speech_sound == 1) {
            window.speechSynthesis.cancel();
        }


        var KEY_CODE = 0;

        if (window.event) {
            KEY_CODE = window.event.keyCode;
        }
        else {
            KEY_CODE = e.which;
        }


        //alert(KEY_CODE);


        if (KEY_CODE == 13) {

            editPlaylist();

        }



        //ESC
        if (KEY_CODE == 27) {
            clickBack();
        }


    }





    function clickBack() {
        $.ajax({
            type: "POST",
            url: "/black/bAccount/managePlaylists",
            async: true,
            success: function (data) {
                $("#bContHolder1").html(data);
            }
        });
    }




    function editPlaylist() {
        $.ajax({
            type: "POST",
            url: "/black/bAccount/ConfirmRenamePlaylist/" + $("#newPlaylistID").val() + "?plst_name=" + $("#newPlaylistName").val(),
            async: true,
            success: function (data) {

                if (is_speech_sound == 1) {
                    var curr_def_msg = new SpeechSynthesisUtterance('done');
                    window.speechSynthesis.speak(curr_def_msg);
                }

                setTimeout(function () {
                    $.ajax({
                        type: "POST",
                        url: "/black/bAccount/managePlaylists",
                        async: true,
                        success: function (data) {
                            $("#bContHolder1").html(data);
                        }
                    });
                }, 1000);

            }
        });
    }

    function setAsDefaultPlaylist() {

        $.ajax({
            type: "POST",
            url: "/black/bAccount/SetDefaultPlaylist/" + $("#newPlaylistID").val(),
            async: true,
            success: function (data) {
                
                if (is_speech_sound == 1) {
                    var curr_def_msg = new SpeechSynthesisUtterance('done');
                    window.speechSynthesis.speak(curr_def_msg);
                }

                setTimeout(function () {
                    $.ajax({
                        type: "POST",
                        url: "/black/bAccount/managePlaylists",
                        async: true,
                        success: function (data) {
                            $("#bContHolder1").html(data);
                        }
                    });
                }, 1000);
            }
        });

    }



    function deletePlaylist() {

        if (confirm('Are you sure you want to delete?')) {

            
            $.ajax({
                type: "POST",
                url: "/black/bAccount/DeletePlaylist/" + $("#newPlaylistID").val(),
                async: true,
                success: function (data) {
                    
                    if (is_speech_sound == 1) {
                        var curr_def_msg = new SpeechSynthesisUtterance('done');
                        window.speechSynthesis.speak(curr_def_msg);
                    }

                    setTimeout(function () {
                        $.ajax({
                            type: "POST",
                            url: "/black/bAccount/managePlaylists",
                            async: true,
                            success: function (data) {
                                $("#bContHolder1").html(data);
                            }
                        });
                    }, 1000);
                }
            });

        }

    }

</script>
