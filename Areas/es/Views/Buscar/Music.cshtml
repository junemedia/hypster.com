@using Google.GData;
@using Google.GData.Client;
@using Google.GData.Extensions;
@using Google.GData.YouTube;
@using Google.YouTube;


@model Feed<Video>
@{
    ViewBag.Title = "Búsqueda de música";
    Layout = null;
}



<div style="float:right; width:1024px;">


<div class="SearchPageRoot">
    
    @{ int curr_index = 1; }
    @{ int back_id = 1; }
    @if (Model != null)
    {
        
        <div style=" float:left; width:100%; height:50px;">
            <div class="radioButton" style=" width:220px; border-bottom:2px solid #ffa910; text-align:left;" onclick="OpenPlayer('media_type=Search&Genre=@(ViewBag.search_string)&search=1&pageS=@ViewBag.CurrPage');">
                
                <a class="chartplPlay" title="play"></a>
                &nbsp;&nbsp;Tocar todo

            </div>
        </div>
        
        
        foreach (var item in Model.Entries)
        {
            <div @if (back_id == 1)
                 { <text>class="SongItm"</text>}
                 else
                 {<text>class="SongItmB"</text>} >
                

                <div class="lfCont">
                    
                    <img alt="" class="imgThumb" src="@item.Thumbnails[0].Url" onclick="OpenPlayer('song_guid=@item.VideoId&song_title=@HttpUtility.UrlEncode(item.Title)');" />
                    
                    <div class="songCont" onclick="OpenPlayer('song_guid=@item.VideoId&song_title=@HttpUtility.UrlEncode(item.Title)');">
                        <span class="style_23">@item.Title</span> <br />
                        Vistas: <span class="style_24">@item.ViewCount</span><br />
                        Autor: <span class="style_24">@item.Author</span><br />
                        Duración: <span class="style_24">@(Int32.Parse(item.Media.Duration.Seconds) / 60)<text>:</text>@(Int32.Parse(item.Media.Duration.Seconds) % 60)</span><br />


                        @if (@item.RatingAverage != null)
                        {
                            <div>Puntuación: <span style=" color:#FCF088;"> @item.RatingAverage</span></div>
                        }

                        @if (item.Media != null && item.Media.Restriction != null)
                        {
                            @item.Media.Restriction.Attributes["relationship"]<text> in:</text>
                            <span onclick="$('#RST_@item.VideoId').css('display','block');" style=" width:80px; height:20px; line-height:20px; color:#FCF088; font-size:11px;">más detalles</span>
                            <div id="RST_@item.VideoId" style=" display:none;">
                                <span style=" color:#FCF088;">@item.Media.Restriction.Value.ToString()</span><br />
                            </div>
                        }
                    </div>
                    
                </div>



                <div class="rtCont">
                    
                    <div class="PlayPl_btn" onclick="OpenPlayer('song_guid=@item.VideoId&song_title=@HttpUtility.UrlEncode(item.Title)');">
                       reproducir la canción
                    </div>
                                        
                    <div class="AddPl_btn" onclick="ShowAddToMyPlaylist('?song_guid=@item.VideoId&song_title=@System.Web.HttpUtility.UrlEncode(item.Title)');">
                       + Añadir a la Listas de reproducción
                    </div>
                    
                    <div class="GetRing_btn">
                        <a href="http://www.funtonia.com/mp3ringtones/search.asp?sw=@ViewBag.search_string&affid=120674" target="_blank">Obtener Tono</a>
                    </div>

                    <div class="SearchSimilar_btn" onclick="SearchMusicStr('@System.Web.HttpUtility.UrlEncode(item.Title)');">
                       Buscar por este título
                    </div>

                </div>


                @if (@item.AppControl != null)
                {
                    <div class="SyndicationBtn">
                        <text>"Sindicación de este video fue restringido". Esta canción podría ser bloqueada por el editor por tocar desde reproductores externos.</text>
                    </div>
                }
            </div>
        
                if (curr_index == 12)
                {
                <div class="SearchSongsAdCont">
                    <div id="TopAdd1_dj938274f">
                        @Html.Partial("~/Views/hypAds/ad_728x90.cshtml")
                    </div>
                    <!-- 06_25 -->
                </div>
                }


                back_id = back_id * -1;
                curr_index = curr_index + 1;
        }






        if (Model.Entries.ToList().Count() == 0)
        {
            <div class="NFMessageCont">
                <div>No hay resultados de vídeo para esta búsqueda “@ViewBag.search_string.Replace("+", " ")”</div>
            </div>
        }


    }
    








@if (Model != null)
{
    <div class="SongSearchPagingRoot">
        
        <div class="PagingInner">
        @{ int total_pages = 20; }
        @{ total_pages = Model.TotalResults / Model.PageSize; }


        @if ((Model.TotalResults % Model.PageSize) > 0)
        {
            total_pages += 1;
        }

        @if (total_pages > 20)
        {
            total_pages = 20;
        }
        


        @for (int i = 1; i <= total_pages; i++)
        {
            if (ViewBag.CurrPage == i)
            {
                <a class="searchPagingBtn_Sel" onclick="SearchMusicStrPage('@ViewBag.search_string', '@i')" >@i.ToString()</a>
            }
            else
            {   
                <a class="searchPagingBtn" onclick="SearchMusicStrPage('@ViewBag.search_string', '@i')" >@i.ToString()</a>
            }
        }
        </div>
       
    </div>
}


<div class="SearchSongsAdCont">
    <div id="TopAdd1_u9e32847">
        @Html.Partial("~/Views/hypAds/ad_728x90.cshtml")
    </div>
    <!-- 06_25 -->
    
</div>



</div>




</div>